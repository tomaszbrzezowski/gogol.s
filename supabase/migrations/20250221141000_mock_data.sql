/*
  # Mock Data for Testing

  1. Sample Admin Users
    - admin@gogols.pl (admin)
    - superadmin@gogols.pl (super_admin)

  2. Sample Reservations
    - Salt cave reservations
    - Motel reservations
*/

-- Insert sample admin users (these will be created in auth.users via Supabase Auth)
-- Note: In a real application, you would create these users through Supabase Auth API
-- This is just for demonstration purposes

-- Create function to insert mock admin users
CREATE OR REPLACE FUNCTION insert_mock_admin_users()
RETURNS void AS $$
BEGIN
  -- Insert mock admin users (these UUIDs would normally be generated by Supabase Auth)
  INSERT INTO admin_users (id, email, full_name, role, is_active) VALUES
    ('550e8400-e29b-41d4-a716-446655440000', 'admin@gogols.pl', 'Administrator Gogols', 'admin', true),
    ('550e8400-e29b-41d4-a716-446655440001', 'superadmin@gogols.pl', 'Super Administrator', 'super_admin', true)
  ON CONFLICT (id) DO NOTHING;
END;
$$ LANGUAGE plpgsql;

-- Insert mock salt cave reservations
INSERT INTO salt_cave_reservations (
  id, created_at, date, time, ticket_type, number_of_people, 
  customer_name, customer_email, customer_phone, status, user_id
) VALUES
  (
    gen_random_uuid(),
    NOW() - INTERVAL '2 days',
    CURRENT_DATE + INTERVAL '3 days',
    '10:00:00',
    'Bilet Normalny',
    2,
    'Jan Kowalski',
    'jan.kowalski@email.com',
    '+48 123 456 789',
    'confirmed',
    '550e8400-e29b-41d4-a716-446655440000'
  ),
  (
    gen_random_uuid(),
    NOW() - INTERVAL '1 day',
    CURRENT_DATE + INTERVAL '5 days',
    '14:00:00',
    'Bilet Ulgowy',
    1,
    'Anna Nowak',
    'anna.nowak@email.com',
    '+48 987 654 321',
    'pending',
    '550e8400-e29b-41d4-a716-446655440000'
  ),
  (
    gen_random_uuid(),
    NOW() - INTERVAL '3 hours',
    CURRENT_DATE + INTERVAL '1 day',
    '16:00:00',
    'Karnet Rodzinny 2+2',
    4,
    'Piotr Wiśniewski',
    'piotr.wisniewski@email.com',
    '+48 555 123 456',
    'confirmed',
    '550e8400-e29b-41d4-a716-446655440001'
  ),
  (
    gen_random_uuid(),
    NOW() - INTERVAL '5 hours',
    CURRENT_DATE + INTERVAL '7 days',
    '12:00:00',
    'Wynajem Prywatny',
    8,
    'Maria Dąbrowska',
    'maria.dabrowska@email.com',
    '+48 777 888 999',
    'pending',
    '550e8400-e29b-41d4-a716-446655440000'
  ),
  (
    gen_random_uuid(),
    NOW() - INTERVAL '1 day',
    CURRENT_DATE + INTERVAL '2 days',
    '18:00:00',
    'Karnet Normalny',
    2,
    'Tomasz Zieliński',
    'tomasz.zielinski@email.com',
    '+48 444 555 666',
    'cancelled',
    '550e8400-e29b-41d4-a716-446655440001'
  );

-- Insert mock motel reservations
INSERT INTO motel_reservations (
  id, created_at, check_in, check_out, room_type, number_of_guests,
  customer_name, customer_email, customer_phone, status, user_id
) VALUES
  (
    gen_random_uuid(),
    NOW() - INTERVAL '3 days',
    CURRENT_DATE + INTERVAL '5 days',
    CURRENT_DATE + INTERVAL '7 days',
    'Pokój dwuosobowy z łazienką',
    2,
    'Katarzyna Lewandowska',
    'katarzyna.lewandowska@email.com',
    '+48 111 222 333',
    'confirmed',
    '550e8400-e29b-41d4-a716-446655440000'
  ),
  (
    gen_random_uuid(),
    NOW() - INTERVAL '2 days',
    CURRENT_DATE + INTERVAL '10 days',
    CURRENT_DATE + INTERVAL '14 days',
    'Pokój trzyosobowy z łazienką',
    3,
    'Paweł Wójcik',
    'pawel.wojcik@email.com',
    '+48 222 333 444',
    'pending',
    '550e8400-e29b-41d4-a716-446655440001'
  ),
  (
    gen_random_uuid(),
    NOW() - INTERVAL '1 day',
    CURRENT_DATE + INTERVAL '3 days',
    CURRENT_DATE + INTERVAL '5 days',
    'Pokój czteroosobowy z łazienką',
    4,
    'Magdalena Kamińska',
    'magdalena.kaminska@email.com',
    '+48 333 444 555',
    'confirmed',
    '550e8400-e29b-41d4-a716-446655440000'
  ),
  (
    gen_random_uuid(),
    NOW() - INTERVAL '4 hours',
    CURRENT_DATE + INTERVAL '1 day',
    CURRENT_DATE + INTERVAL '3 days',
    'Pokój dwuosobowy ze wspólną łazienką',
    2,
    'Robert Jankowski',
    'robert.jankowski@email.com',
    '+48 666 777 888',
    'pending',
    '550e8400-e29b-41d4-a716-446655440001'
  ),
  (
    gen_random_uuid(),
    NOW() - INTERVAL '2 hours',
    CURRENT_DATE + INTERVAL '8 days',
    CURRENT_DATE + INTERVAL '10 days',
    'Pokój dwuosobowy z łazienką',
    2,
    'Agnieszka Kozłowska',
    'agnieszka.kozlowska@email.com',
    '+48 999 111 222',
    'cancelled',
    '550e8400-e29b-41d4-a716-446655440000'
  );

-- Create indexes for better performance on sample data
CREATE INDEX IF NOT EXISTS salt_cave_reservations_customer_email_idx ON salt_cave_reservations(customer_email);
CREATE INDEX IF NOT EXISTS motel_reservations_customer_email_idx ON motel_reservations(customer_email);
CREATE INDEX IF NOT EXISTS salt_cave_reservations_status_idx ON salt_cave_reservations(status);
CREATE INDEX IF NOT EXISTS motel_reservations_status_idx ON motel_reservations(status);

-- Create view for reservation statistics
CREATE OR REPLACE VIEW reservation_stats AS
SELECT 
  'salt_cave' as type,
  COUNT(*) as total_reservations,
  COUNT(CASE WHEN status = 'confirmed' THEN 1 END) as confirmed_reservations,
  COUNT(CASE WHEN status = 'pending' THEN 1 END) as pending_reservations,
  COUNT(CASE WHEN status = 'cancelled' THEN 1 END) as cancelled_reservations
FROM salt_cave_reservations
UNION ALL
SELECT 
  'motel' as type,
  COUNT(*) as total_reservations,
  COUNT(CASE WHEN status = 'confirmed' THEN 1 END) as confirmed_reservations,
  COUNT(CASE WHEN status = 'pending' THEN 1 END) as pending_reservations,
  COUNT(CASE WHEN status = 'cancelled' THEN 1 END) as cancelled_reservations
FROM motel_reservations; 